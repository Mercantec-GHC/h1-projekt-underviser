@page "/create"
@inject NavigationManager Navigation
@using OnimeBestofrieeeendo.Models
@layout MyLayout
@inject DbService DbService


 @*TODO: add form validation*@
<h3 id="msg">Sell your item</h3>
<EditForm model="Item" id="CreateForm" method="post" OnValidSubmit="() => HandleSubmitAsync()" FormName="create" Enhance>
    <div id="NameDiv">
        <label for="ItemName">Enter name:</label>
        <InputText id="ItemName" @bind-Value="Item.ItemName"></InputText>
    </div>
    <div id="DescriptionDiv">
        <label for="Description">Enter descrription:</label>
        <InputText id="Descrription" @bind-Value="Item.Description"></InputText>
    </div>
    <div id="PriceDiv">
        <label for="Price">Price:</label>
        <InputNumber @bind-Value="Item.Price" id="Price"></InputNumber>
    </div>
    <div id="TypeDiv">
        <label for="type">Pick item type:</label>
        <InputRadioGroup id="type" @bind-Value="Item.ItemType" TValue="string">
            <label><InputRadio Value="t_shirt" TValue="string" /> T-Shirt</label><br />
            <label><InputRadio Value="Card" TValue="string" /> Card</label><br />
        </InputRadioGroup>
    </div>
    <div id="RarityDiv">
        <label for="Rarity">Pick item rarity:</label>
        <InputSelect id="Rarity" @bind-Value="Item.Rarity">
            <option value="common">Common</option>
            <option value="rare">Rare</option>
            <option value="epic">Epic</option>
            <option value="legendary">Legendary</option>
        </InputSelect>
    </div>
    <div id="quanDiv">
        <label for="quan">How many items do you sell?</label>
        <InputNumber @bind-Value="Item.Quantity" id="quan"></InputNumber>
    </div>
    <div id="NameDiv">
        <label for="imgURL">Provide a URL with an image of your item:</label>
        <InputText id="imgURL" @bind-Value="Item.ImageUrl"></InputText>
    </div>
    <button type="submit">Create</button>
</EditForm>

@code {
    [SupplyParameterFromForm]
    private TradeItems Item { get; set; } = new();
    private string Card = "Card";
    private string t_shirt = "T-shirt";

    private void GoBack() {
        Navigation.NavigateTo("/");
    }

    private async void HandleSubmitAsync() {
        await DbService.CreateItem(Item);
        GoBack();
    }
}
